!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var r=n(1),o=n(2),i=(n(14),n(18)),s=n(!function(){var t=new Error('Cannot find module "./src/templates/comment.html"');throw t.code="MODULE_NOT_FOUND",t}()),c=function(){this.config={element:document.currentScript,url:location.protocol+"//"+location.host+location.pathname,service:"reddit",both:!0};var t=this.config.element.innerHTML.length>0?JSON.parse(this.config.element.innerHTML.trim()):{};this.config=this.extend(this.config,t),console.log(this)};c.prototype.extend=function(t,e){var n={};for(var r in t)n[r]=t[r];for(var r in e)n[r]=e[r];return n},c.prototype.renderHtml=function(t){var e=this.config,n=e.element.parentNode,o=document.createElement("div"),c=r.render(i,t,{comment:s});console.log(t),o.className="embedd-container",o.innerHTML=c,n.insertBefore(o,e.element)},c.prototype.render=function(){var t=this,e=new o(t.config);e.fetch().then(function(e){t.renderHtml(e)})},(new c).render()},function(t,e,n){var r,o,i;/*!
	 * mustache.js - Logic-less {{mustache}} templates with JavaScript
	 * http://github.com/janl/mustache.js
	 */
!function(n,s){"object"==typeof e&&e&&"string"!=typeof e.nodeName?s(e):(o=[e],r=s,i="function"==typeof r?r.apply(e,o):r,!(void 0!==i&&(t.exports=i)))}(this,function(t){function e(t){return"function"==typeof t}function n(t){return m(t)?"array":typeof t}function r(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(t,e){return null!=t&&"object"==typeof t&&e in t}function i(t,e){return v.call(t,e)}function s(t){return!i(g,t)}function c(t){return String(t).replace(/[&<>"'\/]/g,function(t){return y[t]})}function a(e,n){function o(){if(g&&!y)for(;v.length;)delete d[v.pop()];else v=[];g=!1,y=!1}function i(t){if("string"==typeof t&&(t=t.split(w,2)),!m(t)||2!==t.length)throw new Error("Invalid tags: "+t);c=new RegExp(r(t[0])+"\\s*"),a=new RegExp("\\s*"+r(t[1])),p=new RegExp("\\s*"+r("}"+t[1]))}if(!e)return[];var c,a,p,h=[],d=[],v=[],g=!1,y=!1;i(n||t.tags);for(var T,C,U,E,j,R,L=new l(e);!L.eos();){if(T=L.pos,U=L.scanUntil(c))for(var M=0,O=U.length;O>M;++M)E=U.charAt(M),s(E)?v.push(d.length):y=!0,d.push(["text",E,T,T+1]),T+=1,"\n"===E&&o();if(!L.scan(c))break;if(g=!0,C=L.scan(k)||"name",L.scan(b),"="===C?(U=L.scanUntil(x),L.scan(x),L.scanUntil(a)):"{"===C?(U=L.scanUntil(p),L.scan(_),L.scanUntil(a),C="&"):U=L.scanUntil(a),!L.scan(a))throw new Error("Unclosed tag at "+L.pos);if(j=[C,U,T,L.pos],d.push(j),"#"===C||"^"===C)h.push(j);else if("/"===C){if(R=h.pop(),!R)throw new Error('Unopened section "'+U+'" at '+T);if(R[1]!==U)throw new Error('Unclosed section "'+R[1]+'" at '+T)}else"name"===C||"{"===C||"&"===C?y=!0:"="===C&&i(U)}if(R=h.pop())throw new Error('Unclosed section "'+R[1]+'" at '+L.pos);return f(u(d))}function u(t){for(var e,n,r=[],o=0,i=t.length;i>o;++o)e=t[o],e&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(r.push(e),n=e));return r}function f(t){for(var e,n,r=[],o=r,i=[],s=0,c=t.length;c>s;++s)switch(e=t[s],e[0]){case"#":case"^":o.push(e),i.push(e),o=e[4]=[];break;case"/":n=i.pop(),n[5]=e[2],o=i.length>0?i[i.length-1][4]:r;break;default:o.push(e)}return r}function l(t){this.string=t,this.tail=t,this.pos=0}function p(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function h(){this.cache={}}var d=Object.prototype.toString,m=Array.isArray||function(t){return"[object Array]"===d.call(t)},v=RegExp.prototype.test,g=/\S/,y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},b=/\s*/,w=/\s+/,x=/\s*=/,_=/\s*\}/,k=/#|\^|\/|>|\{|&|=|!/;l.prototype.eos=function(){return""===this.tail},l.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},l.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},p.prototype.push=function(t){return new p(t,this)},p.prototype.lookup=function(t){var n,r=this.cache;if(r.hasOwnProperty(t))n=r[t];else{for(var i,s,c=this,a=!1;c;){if(t.indexOf(".")>0)for(n=c.view,i=t.split("."),s=0;null!=n&&s<i.length;)s===i.length-1&&(a=o(n,i[s])),n=n[i[s++]];else n=c.view[t],a=o(c.view,t);if(a)break;c=c.parent}r[t]=n}return e(n)&&(n=n.call(this.view)),n},h.prototype.clearCache=function(){this.cache={}},h.prototype.parse=function(t,e){var n=this.cache,r=n[t];return null==r&&(r=n[t]=a(t,e)),r},h.prototype.render=function(t,e,n){var r=this.parse(t),o=e instanceof p?e:new p(e);return this.renderTokens(r,o,n,t)},h.prototype.renderTokens=function(t,e,n,r){for(var o,i,s,c="",a=0,u=t.length;u>a;++a)s=void 0,o=t[a],i=o[0],"#"===i?s=this.renderSection(o,e,n,r):"^"===i?s=this.renderInverted(o,e,n,r):">"===i?s=this.renderPartial(o,e,n,r):"&"===i?s=this.unescapedValue(o,e):"name"===i?s=this.escapedValue(o,e):"text"===i&&(s=this.rawValue(o)),void 0!==s&&(c+=s);return c},h.prototype.renderSection=function(t,n,r,o){function i(t){return s.render(t,n,r)}var s=this,c="",a=n.lookup(t[1]);if(a){if(m(a))for(var u=0,f=a.length;f>u;++u)c+=this.renderTokens(t[4],n.push(a[u]),r,o);else if("object"==typeof a||"string"==typeof a||"number"==typeof a)c+=this.renderTokens(t[4],n.push(a),r,o);else if(e(a)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");a=a.call(n.view,o.slice(t[3],t[5]),i),null!=a&&(c+=a)}else c+=this.renderTokens(t[4],n,r,o);return c}},h.prototype.renderInverted=function(t,e,n,r){var o=e.lookup(t[1]);return!o||m(o)&&0===o.length?this.renderTokens(t[4],e,n,r):void 0},h.prototype.renderPartial=function(t,n,r){if(r){var o=e(r)?r(t[1]):r[t[1]];return null!=o?this.renderTokens(this.parse(o),n,r,o):void 0}},h.prototype.unescapedValue=function(t,e){var n=e.lookup(t[1]);return null!=n?n:void 0},h.prototype.escapedValue=function(e,n){var r=n.lookup(e[1]);return null!=r?t.escape(r):void 0},h.prototype.rawValue=function(t){return t[1]},t.name="mustache.js",t.version="2.2.0",t.tags=["{{","}}"];var T=new h;t.clearCache=function(){return T.clearCache()},t.parse=function(t,e){return T.parse(t,e)},t.render=function(t,e,r){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+n(t)+'" was given as the first argument for mustache#render(template, view, partials)');return T.render(t,e,r)},t.to_html=function(n,r,o,i){var s=t.render(n,r,o);return e(i)?void i(s):s},t.escape=c,t.Scanner=l,t.Context=p,t.Writer=h})},function(t,e,n){var r=n(3),o=n(12),i=n(13),s=function(t){this.url=t.url,this.service=t.service,this.both=t.both,this.clients={reddit:new o(t.url),hn:new i(t.url)}};s.prototype.genData=function(){var t=this;return r.all([t.clients.reddit.hasComments(),t.clients.hn.hasComments(),t.clients[t.service].getComments()])},s.prototype.fetch=function(){var t=this;return new r(function(e){t.genData().then(function(n){e({origUrl:t.url,service:t.service,hasReddit:n[0],hasHn:n[1],showBoth:t.both,data:n[2]})})})},t.exports=s},function(t,e,n){"use strict";t.exports=n(4)},function(t,e,n){"use strict";t.exports=n(5),n(7),n(8),n(9),n(10)},function(t,e,n){"use strict";function r(){}function o(t){try{return t.then}catch(e){return v=e,g}}function i(t,e){try{return t(e)}catch(n){return v=n,g}}function s(t,e,n){try{t(e,n)}catch(r){return v=r,g}}function c(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._37=0,this._12=null,this._59=[],t!==r&&d(t,this)}function a(t,e,n){return new t.constructor(function(o,i){var s=new c(r);s.then(o,i),u(t,new h(e,n,s))})}function u(t,e){for(;3===t._37;)t=t._12;return 0===t._37?void t._59.push(e):void m(function(){var n=1===t._37?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._37?f(e.promise,t._12):l(e.promise,t._12));var r=i(n,t._12);r===g?l(e.promise,v):f(e.promise,r)})}function f(t,e){if(e===t)return l(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var n=o(e);if(n===g)return l(t,v);if(n===t.then&&e instanceof c)return t._37=3,t._12=e,void p(t);if("function"==typeof n)return void d(n.bind(e),t)}t._37=1,t._12=e,p(t)}function l(t,e){t._37=2,t._12=e,p(t)}function p(t){for(var e=0;e<t._59.length;e++)u(t,t._59[e]);t._59=null}function h(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function d(t,e){var n=!1,r=s(t,function(t){n||(n=!0,f(e,t))},function(t){n||(n=!0,l(e,t))});n||r!==g||(n=!0,l(e,v))}var m=n(6),v=null,g={};t.exports=c,c._99=r,c.prototype.then=function(t,e){if(this.constructor!==c)return a(this,t,e);var n=new c(r);return u(this,new h(t,e,n)),n}},function(t,e){(function(e){"use strict";function n(t){c.length||(s(),a=!0),c[c.length]=t}function r(){for(;u<c.length;){var t=u;if(u+=1,c[t].call(),u>f){for(var e=0,n=c.length-u;n>e;e++)c[e]=c[e+u];c.length-=u,u=0}}c.length=0,u=0,a=!1}function o(t){var e=1,n=new l(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}function i(t){return function(){function e(){clearTimeout(n),clearInterval(r),t()}var n=setTimeout(e,0),r=setInterval(e,50)}}t.exports=n;var s,c=[],a=!1,u=0,f=1024,l=e.MutationObserver||e.WebKitMutationObserver;s="function"==typeof l?o(r):i(r),n.requestFlush=s,n.makeRequestCallFromTimer=i}).call(e,function(){return this}())},function(t,e,n){"use strict";var r=n(5);t.exports=r,r.prototype.done=function(t,e){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(t){setTimeout(function(){throw t},0)})}},function(t,e,n){"use strict";var r=n(5);t.exports=r,r.prototype["finally"]=function(t){return this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})})}},function(t,e,n){"use strict";function r(t){var e=new o(o._99);return e._37=1,e._12=t,e}var o=n(5);t.exports=o;var i=r(!0),s=r(!1),c=r(null),a=r(void 0),u=r(0),f=r("");o.resolve=function(t){if(t instanceof o)return t;if(null===t)return c;if(void 0===t)return a;if(t===!0)return i;if(t===!1)return s;if(0===t)return u;if(""===t)return f;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new o(e.bind(t))}catch(n){return new o(function(t,e){e(n)})}return r(t)},o.all=function(t){var e=Array.prototype.slice.call(t);return new o(function(t,n){function r(s,c){if(c&&("object"==typeof c||"function"==typeof c)){if(c instanceof o&&c.then===o.prototype.then){for(;3===c._37;)c=c._12;return 1===c._37?r(s,c._12):(2===c._37&&n(c._12),void c.then(function(t){r(s,t)},n))}var a=c.then;if("function"==typeof a){var u=new o(a.bind(c));return void u.then(function(t){r(s,t)},n)}}e[s]=c,0===--i&&t(e)}if(0===e.length)return t([]);for(var i=e.length,s=0;s<e.length;s++)r(s,e[s])})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){t.forEach(function(t){o.resolve(t).then(e,n)})})},o.prototype["catch"]=function(t){return this.then(null,t)}},function(t,e,n){"use strict";var r=n(5),o=n(11);t.exports=r,r.denodeify=function(t,e){return e=e||1/0,function(){var n=this,o=Array.prototype.slice.call(arguments,0,e>0?e:0);return new r(function(e,r){o.push(function(t,n){t?r(t):e(n)});var i=t.apply(n,o);!i||"object"!=typeof i&&"function"!=typeof i||"function"!=typeof i.then||e(i)})}},r.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),n="function"==typeof e[e.length-1]?e.pop():null,i=this;try{return t.apply(this,arguments).nodeify(n,i)}catch(s){if(null===n||"undefined"==typeof n)return new r(function(t,e){e(s)});o(function(){n.call(i,s)})}}},r.prototype.nodeify=function(t,e){return"function"!=typeof t?this:void this.then(function(n){o(function(){t.call(e,null,n)})},function(n){o(function(){t.call(e,n)})})}},function(t,e,n){"use strict";function r(){if(a.length)throw a.shift()}function o(t){var e;e=c.length?c.pop():new i,e.task=t,s(e)}function i(){this.task=null}var s=n(6),c=[],a=[],u=s.makeRequestCallFromTimer(r);t.exports=o,i.prototype.call=function(){try{this.task.call()}catch(t){o.onerror?o.onerror(t):(a.push(t),u())}finally{this.task=null,c[c.length]=this}}},function(t,e,n){var r=n(3),o=function(t){var e="https://www.reddit.com",n="/search.json?q=url:",r=e+n+t;this.base=e,this.data=this.get(r)};o.prototype.get=function(t){return new r(function(e){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="json",n.addEventListener("load",function(){e(n)}),n.send()})},o.prototype.decode=function(t){var e=document.createElement("textarea");return e.innerHTML=t,e.value},o.prototype.threadUrl=function(t,e){return this.base+"/r/"+t+"/comments/"+e+".json"},o.prototype.getThreads=function(t){var e=this,n=t.response,o=n.data.children.filter(function(t){return!!t.data.num_comments}),i=o.map(function(t){return new r(function(n){var r=e.threadUrl(t.data.subreddit,t.data.id);n(e.get(r))})});return r.all(i)},o.prototype.comment=function(t,e,n){var r=this,o=n||0,i={author:t.author,body_html:r.decode(t.body_html),created:t.created_utc,id:t.id,score:t.score,subreddit:e.subreddit,permalink:r.base+e.permalink,thread:r.base+e.permalink+t.id,replies:null,depth:o,isEven:function(){return this.depth%2===0}};if(t.replies&&t.replies.data.children.length>0){var s=o+1;i.replies=t.replies.data.children.map(function(t){return r.comment(t.data,e,s)})}return i},o.prototype.parseComments=function(t){var e=this;return new r(function(n){var r=t.map(function(t){var n=t.response,r=n[0].data.children[0].data,o=n[1].data.children.map(function(t){return e.comment(t.data,r)});return{op:r,comments:o}});n(r)})},o.prototype.mergeComments=function(t){return new r(function(e){var n=function(e,r,o){if(o>t.length-1)return{score:e,threads:t.length,comments:r,multiple:function(){return this.threads>1}};var i=t[o],s=e+=i.op.score,c=r.concat(i.comments);return n(s,c,o+1)},r=n(0,[],0);r.comments=r.comments.sort(function(t,e){return e.score-t.score}),e(r)})},o.prototype.hasComments=function(){var t=this;return new r(function(e){t.data.then(function(t){var n=t.response,r=n.data.children.filter(function(t){return!!t.data.num_comments});e(!!r)})})},o.prototype.getComments=function(){var t=this;return new r(function(e){t.data.then(t.getThreads.bind(t)).then(t.parseComments.bind(t)).then(t.mergeComments.bind(t)).then(e)})},t.exports=o},function(t,e){var n=function(t){this.url=t};n.prototype.hasComments=function(){return!0},n.prototype.getComments=function(){return[{comment:"love it"},{comment:"wow!"}]},t.exports=n},function(t,e,n){var r=n(15);"string"==typeof r&&(r=[[t.id,r,""]]);n(17)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(16)(),e.push([t.id,'html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}.embedd-container section{max-width:68em;margin-left:auto;margin-right:auto}.embedd-container section:after{clear:both;content:"";display:table}.embedd-container section h3,.embedd-container section p{color:#333}.embedd-container section a{color:#369;text-decoration:none}.embedd-container section article{float:left;display:block;margin-right:2.35765%;width:100%;padding:20px;padding-top:10px;margin-bottom:10px;border:1px solid #f2f2f2;border-radius:3px;background-color:#f5f5f5}.embedd-container section article:last-child{margin-right:0}.embedd-container section article p{margin:10px 0}.embedd-container section article span{margin-right:5px}.embedd-container section article blockquote{margin:0;opacity:.7}.embedd-container section article blockquote p{padding-left:15px;border-left:1px solid #333}.embedd-container section article .children{padding-top:15px}.embedd-container section article.evenDepth{background-color:#fff}',""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<e.length;o++){var s=e[o];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(t,e,n){function r(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=h[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(u(r.parts[i],e))}else{for(var s=[],i=0;i<r.parts.length;i++)s.push(u(r.parts[i],e));h[r.id]={id:r.id,refs:1,parts:s}}}}function o(t){for(var e=[],n={},r=0;r<t.length;r++){var o=t[r],i=o[0],s=o[1],c=o[2],a=o[3],u={css:s,media:c,sourceMap:a};n[i]?n[i].parts.push(u):e.push(n[i]={id:i,parts:[u]})}return e}function i(t,e){var n=v(),r=b[b.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),b.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function s(t){t.parentNode.removeChild(t);var e=b.indexOf(t);e>=0&&b.splice(e,1)}function c(t){var e=document.createElement("style");return e.type="text/css",i(t,e),e}function a(t){var e=document.createElement("link");return e.rel="stylesheet",i(t,e),e}function u(t,e){var n,r,o;if(e.singleton){var i=y++;n=g||(g=c(e)),r=f.bind(null,n,i,!1),o=f.bind(null,n,i,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=a(e),r=p.bind(null,n),o=function(){s(n),n.href&&URL.revokeObjectURL(n.href)}):(n=c(e),r=l.bind(null,n),o=function(){s(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}function f(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=w(e,o);else{var i=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}function l(t,e){var n=e.css,r=e.media;e.sourceMap;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function p(t,e){var n=e.css,r=(e.media,e.sourceMap);r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([n],{type:"text/css"}),i=t.href;t.href=URL.createObjectURL(o),i&&URL.revokeObjectURL(i)}var h={},d=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},m=d(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),v=d(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,y=0,b=[];t.exports=function(t,e){if("object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},"undefined"==typeof e.singleton&&(e.singleton=m()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var n=o(t);return r(n,e),function(t){for(var i=[],s=0;s<n.length;s++){var c=n[s],a=h[c.id];a.refs--,i.push(a)}if(t){var u=o(t);r(u,e)}for(var s=0;s<i.length;s++){var a=i[s];if(0===a.refs){for(var f=0;f<a.parts.length;f++)a.parts[f]();delete h[a.id]}}}};var w=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports="<section>{{#data}}<h3>{{score}} upvotes over {{threads}} thread{{#multiple}}s{{/multiple}} on {{service}}</h3>{{#comments}} {{> comment}} {{/comments}} {{^comments}}<h3>No Comments on Reddit</h3>{{/comments}} {{/data}}</section>"}]);